[Unit]
Description=A Spring Boot Applcation for dgdc
After=syslog.target

[Service]
User=ubuntu
ExecStart=/opt/tomcat/webapps/DGDC.war
SuccessExitStatus=143

[Install]
WantedBy=multi-user.target

  

/etc/systemd/system

vim

service name -	dgdc.service


systemctl enable dgdc
systemctl start dgdc
systemctl stop dgdc
systemctl restart dgdc
systemctl status dgdc

systemctl enable nginx
systemctl start nginx
systemctl stop nginx
systemctl restart nginx
systemctl status nginx

/etc/nginx/conf.d/


			codewithdurgesh.com.conf


server {
  listen 0.0.0.0:80;
  root  /home/ubuntu/project/build; 
  server_name 13.232.86.140;	
  location / {
    try_files $uri $uri/ /index.html;
  }
}


in case of error 

tail -n 50 /var/log/nginx/error.log

ls -l /home/ubuntu/project/build/
total 44


grep -R "user" /etc/nginx/nginx.conf /etc/nginx/sites-available/

sudo usermod -aG ubuntu www-data

sudo service nginx restart


server {
  listen 0.0.0.0:80;
  server_name 35.154.93.120;

  location / {
    root /home/ubuntu/apache-tomcat-10.1.18/webapps/build;
    index index.html;

    try_files $uri $uri/ /index.html;
  }

}

Rushi@801

create user 'rushikesh'@'%' identified by 'Rushi@801';

GRANT ALL PRIVILEGES ON *.* TO 'rushikesh'@'%' WITH GRANT OPTION;

FLUSH PRIVILEGES;






sha512sum -c apache-tomcat-10.1.18.tar.gz.sha512



cd apache-tomcat-10.1.18

 export CATALINA_HOME=$(pwd)

./bin/startup.sh

 chmod +x ./bin/startup.sh

chmod 777 /var/lib/tomcat9/webapps


 Syntax Errors in Nginx Configuration:
Verify that there are no syntax errors in your Nginx configuration file. You can check the syntax using the following command:
bash
Copy code
sudo nginx -t

 sudo chown -R www-data:www-data /home/ubuntu/apache-tomcat-10.1.18/webapps/build

sudo chmod -R 777 /home/ubuntu/apache-tomcat-10.1.18/webapps/build


#To Check The Storage and attach EBS
1.sudo su
2.lsblk
3. fdisk /dev/xvdf
4. n
5. p
6. 1
7. w
8. mkfs.xfs /dev/xvdf1
9. mkdir /mnt/dd1
10. mount /dev/xvdf1 /mnt/dd1


#To Set Tomcat 

JAVA_HOME="/usr/lib/jvm/java-17-openjdk-amd64/"

echo $JAVA_HOME

#To Paste in tomcat confuguration

/usr/lib/jvm/java-17-openjdk-amd64/

#Step 3: Create Tomcat User
sudo useradd -r -m -U -d /opt/tomcat -s /bin/false tomcat 

#To Check User in created or Not 
cat /etc/passwd

#To Install Tomcat 
wget https://downloads.apache.org/tomcat/tomcat-10/v10.1.18/bin/apache-tomcat-10.1.18.tar.gz

tar -zxvf apache-tomcat-10.1.18.tar.gz -C /opt/tomcat 

mv * /opt/tomcat/

 cd /opt/tomcat/

#Step 5: Set Permissions
#First, weâ€™ll change the directory ownership to tomcat.

This will move all files and directories from the current directory (apache-tomcat-10.1.18) to the /opt/tomcat/ directory.



Set Permissions

sudo chown -R tomcat: /opt/tomcat 
sudo sh -c 'chmod +x /opt/tomcat/bin/*.sh' 

#To check folde is empty or not
 cd /opt/tomcat/

 #To Change Port 

 sudo nano /opt/tomcat/conf/server.xml


 #Step 6: Create Tomcat Application Accounts
 sudo nano /opt/tomcat/conf/tomcat-users.xml 

 <role rolename="manager-gui" />
<user username="manager" password="rushi@801" roles="manager-gui" />
 
<!-- user admin can access manager and admin section both -->
<role rolename="admin" />
<user username="admin" password="rushi@801" roles="manager-gui,admin-gui" />

control x shift y then enter

#Step 7: Allow Remote Hosts to Access Tomcat
sudo nano /opt/tomcat/webapps/manager/META-INF/context.xml

<Context antiResourceLocking="false" privileged="true" >
  <CookieProcessor className="org.apache.tomcat.util.http.Rfc6265CookieProcessor"
                   sameSiteCookies="strict" />
   <Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1 |.*" /> 
  ...
</Context>

control x shift y then enter


sudo nano /opt/tomcat/webapps/host-manager/META-INF/context.xml

<Context antiResourceLocking="false" privileged="true" >
  <CookieProcessor className="org.apache.tomcat.util.http.Rfc6265CookieProcessor"
                   sameSiteCookies="strict" />
  <Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1 |.*" />
  ...
</Context>

control x shift y then enter

#Step 8: Create a Systemd Service File

sudo nano /etc/systemd/system/tomcat.service 

[Unit]
Description=Apache Tomcat 10 Web Application Server
After=network.target

[Service]
Type=forking

User=tomcat
Group=tomcat

Environment="JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64/"
Environment="CATALINA_HOME=/opt/tomcat"
Environment="CATALINA_BASE=/opt/tomcat"
Environment="CATALINA_PID=/opt/tomcat/temp/tomcat.pid"
Environment="CATALINA_OPTS=-Xms512M -Xmx1024M -server -XX:+UseParallelGC"

ExecStart=/opt/tomcat/bin/startup.sh
ExecStop=/opt/tomcat/bin/shutdown.sh

[Install]
WantedBy=multi-user.target


sudo systemctl daemon-reload
sudo systemctl enable tomcat
sudo systemctl is-enabled tomcat
sudo systemctl start tomcat
sudo systemctl stop tomcat
sudo systemctl status tomcat
sudo systemctl restart tomcat 

sudo ufw allow 8080
apt install firewalld
firewall-cmd --reload
